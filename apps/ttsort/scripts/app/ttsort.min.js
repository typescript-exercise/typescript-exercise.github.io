var ttsort;!function(a){var b=function(){function b(){this.createGraph=function(){return new a.Graph},this.createTTSort=function(b){return new a.TTSort(b)},this.createNode=function(b){return new a.Node(b)},this.createFormatter=function(){return new a.OutputFormatter},this.createParser=function(){return new a.InputParser}}return b}();a.DomainFactory=b}(ttsort||(ttsort={}));var DomainFactory=ttsort.DomainFactory;angular.module("ttsort",[]).factory("domainFactory",function(){return new DomainFactory}).controller("MainController",["$scope","domainFactory",function(a,b){var c=b.createParser(),d=b.createFormatter();a.sort=function(){try{var e=b.createGraph();c.forEachEntries(a.input,function(a,c){e.addNodes(b.createNode(a),b.createNode(c))});var f=b.createTTSort(e),g=f.sort();a.output=d.format(g)}catch(h){if(!_.isString(h))throw h;alert(h)}}}]);var ttsort;!function(a){var b=function(){function a(){this.nodeMap={}}return a.prototype.addNodes=function(a,b){var c=this.register(a),d=this.register(b);c.addNextNode(d)},a.prototype.hasEdge=function(){return _.any(this.nodeMap,function(a){return a.hasNextNode()})},a.prototype.getEntryNodes=function(){return _.filter(this.nodeMap,function(a){return a.isEntryNode()})},a.prototype.getNode=function(a){return this.nodeMap[a]},a.prototype.register=function(a){var b=a.toString();return b in this.nodeMap?this.nodeMap[b]:(this.nodeMap[b]=a,a)},a}();a.Graph=b}(ttsort||(ttsort={}));var ttsort;!function(a){var b=function(){function a(){}return a.prototype.forEachEntries=function(a,b){if(_.isEmpty(a))throw"Input が入力されていません。";var c=a.split(/\n/);_.each(c,function(a){if(a){var c=$.trim(a).split(/ +/);if(2!==c.length)throw"Input のフォーマットが不正です。";b(c[0],c[1])}})},a}();a.InputParser=b}(ttsort||(ttsort={}));var ttsort;!function(a){var b=function(){function a(a){this.nextNodes=[],this.previousNodes=[],this.name=a}return a.prototype.addNextNode=function(a){this.nextNodes.push(a),a.previousNodes.push(this)},a.prototype.isEntryNode=function(){return _.isEmpty(this.previousNodes)},a.prototype.hasNextNode=function(){return!_.isEmpty(this.nextNodes)},a.prototype.forEachNextNode=function(a){_.each(_.clone(this.nextNodes),a)},a.prototype.removePreviousNode=function(a){this.previousNodes=_.reject(this.previousNodes,function(b){return b===a});var b=this;a.nextNodes=_.reject(a.nextNodes,function(a){return a===b})},a.prototype.getNextNodes=function(){return _.clone(this.nextNodes)},a.prototype.getPreviousNodes=function(){return _.clone(this.previousNodes)},a.prototype.toString=function(){return this.name},a}();a.Node=b}(ttsort||(ttsort={}));var ttsort;!function(a){var b=function(){function a(){}return a.prototype.format=function(a){return _.reduce(a,function(a,b){return a+"\n"+b})},a}();a.OutputFormatter=b}(ttsort||(ttsort={}));var ttsort;!function(a){var b=function(){function a(a){this.graph=a}return a.prototype.sort=function(){for(var a=this.graph.getEntryNodes(),b=[];!_.isEmpty(a);){var c=a.pop();b.push(c),c.forEachNextNode(function(b){b.removePreviousNode(c),b.isEntryNode()&&a.push(b)})}if(this.graph.hasEdge())throw"循環している部分があります。";return b},a}();a.TTSort=b}(ttsort||(ttsort={}));
//# sourceMappingURL=ttsort.min.js.map